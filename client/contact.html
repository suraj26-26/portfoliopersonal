<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contact Me - Suraj Rawat</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"/>
  <link rel="stylesheet" href="contact.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet"/>
  <style>
    input.valid, textarea.valid, select.valid { border: 2px solid green; }
    input.invalid, textarea.invalid, select.invalid { border: 2px solid red; }
  </style>
</head>
<body>
  <section class="contact-section">
    <div class="contact-container">
      <h1>Get in Touch</h1>
      <p>Feel free to reach out for collaboration, projects, or just a friendly hello ðŸ‘‹</p>

      <form id="contactForm" class="contact-form" method="POST" action="/submit-form">
        <input type="text" id="name" name="name" placeholder="Your Name" required />
        <input type="email" id="email" name="email" placeholder="Your Email" required />
        <input type="text" id="mobile" name="mobile" placeholder="Your Mobile Number" required />
        <select id="gender" name="gender" required>
          <option value="">Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
        <textarea id="message" name="message" placeholder="Your Message" rows="5" required></textarea>
        <button type="submit">Send Message</button>
      </form>

      <div class="social-links">
        <a href="mailto:surajrawatkumar2001@gmail.com"><i class="fas fa-envelope"></i></a>
        <a href="https://www.linkedin.com/in/suraj-rawat-b550bb29a" target="_blank"><i class="fab fa-linkedin"></i></a>
        <a href="https://www.instagram.com/its_kumar_skr" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://wa.me/917905793294" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <a href="https://github.com/suraj26-26" target="_blank"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </section>

  <script>
    const isValidEmail = email => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    const isValidMobile = mobile => /^[0-9]{10}$/.test(mobile);

    const nameField = document.getElementById("name");
    const emailField = document.getElementById("email");
    const mobileField = document.getElementById("mobile");
    const genderField = document.getElementById("gender");
    const messageField = document.getElementById("message");

    const validateField = (input, isValid) => {
      if (isValid) {
        input.classList.remove("invalid");
        input.classList.add("valid");
      } else {
        input.classList.remove("valid");
        input.classList.add("invalid");
      }
    };

    nameField.addEventListener("input", () => {
      validateField(nameField, nameField.value.trim() !== "");
    });

    emailField.addEventListener("input", () => {
      validateField(emailField, isValidEmail(emailField.value.trim()));
    });

    mobileField.addEventListener("input", () => {
      validateField(mobileField, isValidMobile(mobileField.value.trim()));
    });

    genderField.addEventListener("change", () => {
      validateField(genderField, genderField.value !== "");
    });

    messageField.addEventListener("input", () => {
      validateField(messageField, messageField.value.trim() !== "");
    });

    document.getElementById("contactForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      const name = nameField.value.trim();
      const email = emailField.value.trim();
      const mobile = mobileField.value.trim();
      const gender = genderField.value;
      const message = messageField.value.trim();

      validateField(nameField, name !== "");
      validateField(emailField, isValidEmail(email));
      validateField(mobileField, isValidMobile(mobile));
      validateField(genderField, gender !== "");
      validateField(messageField, message !== "");

      if (!name || !isValidEmail(email) || !isValidMobile(mobile) || !gender || !message) {
        alert("All fields are compulsory.");
        return;
      }

      try {
        const response = await fetch("https://portfoliopersonal-rrkt.onrender.com/submit-form", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name, email, mobile, gender, message }),
        });

        const result = await response.json();
        alert(result.message);
        document.getElementById("contactForm").reset();
        [nameField, emailField, mobileField, genderField, messageField].forEach(el => {
          el.classList.remove("valid", "invalid");
        });
      } catch (error) {
        console.error(error);
        alert("There was an error submitting the form.");
      }
    });
  </script>
</body>
</html>
